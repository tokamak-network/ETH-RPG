@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap');

@import "tailwindcss";

:root {
  /* Primary - Dark Fantasy Tone */
  --color-bg-primary: #0a0a0f;
  --color-bg-secondary: #12121a;
  --color-bg-tertiary: #1a1a2e;

  /* Accent */
  --color-accent-gold: #f4c430;
  --color-accent-blue: #4a9eff;
  --color-accent-purple: #8b5cf6;
  --color-accent-red: #ef4444;
  --color-accent-green: #22c55e;

  /* Text */
  --color-text-primary: #e8e8ed;
  --color-text-secondary: #9ca3af;
  --color-text-muted: #6b7280;

  /* Border */
  --color-border: #2a2a3e;
  --color-border-accent: #f4c430;

  /* Class Colors */
  --color-class-hunter: #22c55e;
  --color-class-rogue: #ef4444;
  --color-class-summoner: #8b5cf6;
  --color-class-merchant: #f4c430;
  --color-class-priest: #60a5fa;
  --color-class-elder-wizard: #a78bfa;
  --color-class-guardian: #f97316;
  --color-class-warrior: #94a3b8;

  /* Fonts */
  --font-display: 'Cinzel', serif;
  --font-body: 'Inter', 'Noto Sans KR', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  /* Background/Foreground for Tailwind */
  --background: #0a0a0f;
  --foreground: #e8e8ed;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-bg-primary: var(--color-bg-primary);
  --color-bg-secondary: var(--color-bg-secondary);
  --color-bg-tertiary: var(--color-bg-tertiary);
  --color-accent-gold: var(--color-accent-gold);
  --color-accent-blue: var(--color-accent-blue);
  --color-accent-purple: var(--color-accent-purple);
  --color-accent-red: var(--color-accent-red);
  --color-accent-green: var(--color-accent-green);
  --color-text-primary: var(--color-text-primary);
  --color-text-secondary: var(--color-text-secondary);
  --color-text-muted: var(--color-text-muted);
  --color-border: var(--color-border);
  --color-border-accent: var(--color-border-accent);
  --font-display: var(--font-display);
  --font-body: var(--font-body);
  --font-mono: var(--font-mono);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-body);
  min-height: 100vh;
}

/* Stat bar fill animation */
@keyframes stat-fill {
  from { width: 0; }
  to { width: var(--fill-width); }
}

.stat-bar-fill {
  animation: stat-fill 1s ease-out forwards;
}

/* Gold shimmer for power text */
@keyframes gold-shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.text-gold-shimmer {
  background: linear-gradient(90deg, #f4c430, #ffd700, #f4c430, #daa520, #f4c430);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gold-shimmer 3s linear infinite;
}

/* Card glow effect */
.card-glow {
  transition: box-shadow 0.3s ease;
}

.card-glow:hover {
  box-shadow: var(--glow-color, 0 0 20px rgba(244, 196, 48, 0.3));
}

/* Loading pulse */
@keyframes loading-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

.loading-pulse {
  animation: loading-pulse 1.5s ease-in-out infinite;
}

/* Pixel character idle bob */
@keyframes pixel-idle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

/* Pixel character entrance + idle */
@keyframes pixel-appear {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.pixel-character {
  animation: pixel-appear 0.5s ease-out forwards,
             pixel-idle 2.5s ease-in-out 0.5s infinite;
  will-change: transform, opacity;
}

/* === Stat-based sprite visual effects === */

/* HP heartbeat glow */
@keyframes hp-heartbeat {
  0%, 100% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
  50% { box-shadow: 0 0 calc(var(--fx-hp) * 15px) rgba(239, 68, 68, calc(var(--fx-hp) * 0.5)); }
}

/* MP arcane swirl */
@keyframes mp-swirl {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* INT wisdom particles drift */
@keyframes int-drift {
  0% { background-position: 0% 100%; opacity: 0; }
  30% { opacity: calc(var(--fx-int) * 0.4); }
  100% { background-position: 50% -20%; opacity: 0; }
}

/* LUCK sparkle (shared by A and B, offset via animation-delay) */
@keyframes luck-twinkle {
  0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
  50% { opacity: calc(var(--fx-luck) * 0.5); transform: translate(-50%, -50%) scale(1); }
}

.sprite-effects-wrapper {
  position: relative;
  display: inline-block;
  will-change: filter, transform;
}

/* HP: heartbeat glow around sprite */
.sprite-fx-hp {
  animation: hp-heartbeat calc(2.5s - var(--fx-hp) * 1s) ease-in-out infinite;
  border-radius: 8px;
}

/* MP: rotating conic gradient overlay */
.sprite-fx-mp::before {
  content: '';
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg,
    transparent 0%,
    rgba(139, 92, 246, calc(var(--fx-mp) * 0.35)) 25%,
    transparent 50%,
    rgba(139, 92, 246, calc(var(--fx-mp) * 0.2)) 75%,
    transparent 100%
  );
  animation: mp-swirl calc(4s - var(--fx-mp) * 2s) linear infinite;
  pointer-events: none;
  z-index: -1;
}

/* INT: rising blue particles */
.sprite-fx-int::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(circle 2px, rgba(96, 165, 250, 0.8) 100%, transparent 100%);
  background-size: 20px 20px;
  animation: int-drift calc(3.5s - var(--fx-int) * 1.5s) ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}

/* LUCK: sparkle overlay container */
.sprite-fx-luck-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* LUCK sparkle A (top-right) */
.sprite-fx-luck-overlay::before {
  content: '\2726';
  position: absolute;
  top: 10%;
  right: 10%;
  font-size: 14px;
  color: #22c55e;
  animation: luck-twinkle calc(4s - var(--fx-luck) * 2s) ease-in-out infinite;
}

/* LUCK sparkle B (bottom-left) */
.sprite-fx-luck-overlay::after {
  content: '\2726';
  position: absolute;
  bottom: 15%;
  left: 12%;
  font-size: 10px;
  color: #22c55e;
  animation: luck-twinkle calc(4s - var(--fx-luck) * 2s) ease-in-out 1s infinite;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .pixel-character {
    animation: none;
    opacity: 1;
  }

  .stat-bar-fill {
    animation: none;
  }

  .text-gold-shimmer {
    animation: none;
  }

  .loading-pulse {
    animation: none;
    opacity: 1;
  }

  .sprite-fx-hp {
    animation: none;
  }

  .sprite-fx-mp::before {
    animation: none;
    opacity: 0.15;
  }

  .sprite-fx-int::after {
    animation: none;
    opacity: 0.15;
  }

  .sprite-fx-luck-overlay::before,
  .sprite-fx-luck-overlay::after {
    animation: none;
    opacity: 0.3;
  }
}

/* Card flip 3D animation */
.card-flip-container {
  perspective: 1200px;
}

.card-flip-inner {
  transition: transform 0.6s ease;
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
}

.card-flip-inner.is-flipped {
  transform: rotateY(180deg);
}

.card-face,
.card-face-back {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.card-face-back {
  transform: rotateY(180deg);
}

@media (prefers-reduced-motion: reduce) {
  .card-flip-inner {
    transition: none;
  }

  .card-flip-inner.is-flipped .card-face {
    display: none;
  }

  .card-flip-inner:not(.is-flipped) .card-face-back {
    display: none;
  }

  .card-flip-inner.is-flipped .card-face-back {
    transform: none;
  }
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-primary);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted);
}
